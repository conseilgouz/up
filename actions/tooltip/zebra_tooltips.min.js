
jQuery(function($){(function($){'use strict';$.Zebra_Tooltips=function(elements,options){this.version='2.1.0';var defaults={class:'',animation_speed:250,animation_offset:20,close_on_click:true,content:false,hide_delay:100,keep_visible:true,max_width:250,opacity:'.95',position:'center',prerender:false,show_delay:100,vertical_alignment:'above',vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},plugin=this,window_width,window_height,horizontal_scroll,vertical_scroll,_init=function(){elements.each(function(){var
$element=$(this),title=$element.attr('title'),data_attributes=$element.data(),data,tooltip_settings={};for(data in data_attributes)
if(data.indexOf('ztt_')===0){data=data.replace(/^ztt\_/,'');if(undefined!==defaults[data])
tooltip_settings[data]=data_attributes['ztt_'+data];}
tooltip_settings=$.extend(defaults,options,tooltip_settings);if(title)tooltip_settings.content=$element.attr('title');if(undefined!==tooltip_settings.content&&tooltip_settings.content.trim()!==''){$element.on({mouseenter:function(){if(title)$(this).attr('title','');_show($element);},mouseleave:function(){_hide($element);if(title)$(this).attr('title',title);}});$element.data('Zebra_Tooltip',$.extend({tooltip:null,show_timeout:null,hide_timeout:null,sticky:false,destroy:false,muted:false},tooltip_settings));if(tooltip_settings.prerender)_create_tooltip($element);}});},_create_tooltip=function($element){var tooltip_settings=$element.data('Zebra_Tooltip'),tooltip,message,arrow_container,arrow,tooltip_width,tooltip_height,arrow_width,arrow_height,tmp_width,tmp_height,browser_window=$(window),element_position,tooltip_left,tooltip_top,arrow_left;if(!tooltip_settings.tooltip){tooltip=$('<div>',{class:'Zebra_Tooltip '+tooltip_settings.class,css:{opacity:0,display:'block'}});message=$('<div>',{class:'Zebra_Tooltip_Message',css:{maxWidth:tooltip_settings.max_width}}).html(tooltip_settings.content).appendTo(tooltip);arrow_container=$('<div>',{class:'Zebra_Tooltip_Arrow'}).appendTo(tooltip);arrow=$('<div>').addClass('Zebra_Tooltip_Arrow_Border').appendTo(arrow_container);$('<div>').appendTo(arrow_container);if(tooltip_settings.keep_visible){tooltip.on('mouseleave'+(tooltip_settings.close_on_click?' click':''),function(){_hide($element);});tooltip.on('mouseenter',function(){_show($element);});}
tooltip.appendTo('body');if(tooltip_settings.sticky)message.addClass('Zebra_Tooltip_Has_Close');tooltip_width=tooltip.outerWidth();tooltip_height=tooltip.outerHeight();arrow_width=arrow.outerWidth();arrow_height=arrow.outerHeight();tmp_width=message.outerWidth();tmp_height=message.outerHeight();tooltip_settings={tooltip:tooltip,tooltip_width:tooltip_width,tooltip_height:tooltip_height+(arrow_height/2),message:message,arrow_container:arrow_container,arrow_width:arrow_width,arrow_height:arrow_height,arrow:arrow};tooltip.css({width:tooltip_settings.tooltip_width,height:tooltip_settings.tooltip_height});tooltip_settings.tooltip_width=tooltip_settings.tooltip_width+(message.outerWidth()-tmp_width);tooltip_settings.tooltip_height=tooltip_settings.tooltip_height+(message.outerHeight()-tmp_height);tooltip.css({width:tooltip_settings.tooltip_width,height:tooltip_settings.tooltip_height,display:'none'});tooltip_settings=$.extend($element.data('Zebra_Tooltip'),tooltip_settings);$element.data('Zebra_Tooltip',tooltip_settings);}
if(tooltip_settings.sticky&&!tooltip_settings.close){$('<a>',{class:'Zebra_Tooltip_Close',href:'javascript:void(0)'}).html('&times;').on('click',function(e){e.preventDefault();var tooltip_settings=$element.data('Zebra_Tooltip');tooltip_settings.sticky=false;$element.data('Zebra_Tooltip',tooltip_settings);_hide($element);}).appendTo(tooltip_settings.message);tooltip_settings.close=true;tooltip_settings=$.extend($element.data('Zebra_Tooltip'),tooltip_settings);$element.data('Zebra_Tooltip',tooltip_settings);}
window_width=browser_window.width();window_height=browser_window.height();element_position=$element.offset();$.extend(tooltip_settings,{element_left:element_position.left,element_top:element_position.top,element_width:$element.outerWidth(),element_height:$element.outerHeight()});vertical_scroll=browser_window.scrollTop();horizontal_scroll=browser_window.scrollLeft();tooltip_left=tooltip_settings.position==='left'?tooltip_settings.element_left-tooltip_settings.tooltip_width+tooltip_settings.arrow_width:(tooltip_settings.position==='right'?tooltip_settings.element_left+tooltip_settings.element_width-tooltip_settings.arrow_width:(tooltip_settings.element_left+(tooltip_settings.element_width-tooltip_settings.tooltip_width)/2));tooltip_top=tooltip_settings.element_top-tooltip_settings.tooltip_height;arrow_left=tooltip_settings.position==='left'?tooltip_settings.tooltip_width-tooltip_settings.arrow_width-(tooltip_settings.arrow_width/2):(tooltip_settings.position==='right'?(tooltip_settings.arrow_width/2):((tooltip_settings.tooltip_width-tooltip_settings.arrow_width)/2));if(tooltip_left+tooltip_settings.tooltip_width>window_width+horizontal_scroll){arrow_left-=(window_width+horizontal_scroll)-(tooltip_left+tooltip_settings.tooltip_width)-6;tooltip_left=(window_width+horizontal_scroll)-tooltip_settings.tooltip_width-6;if(arrow_left+tooltip_settings.arrow_width>tooltip_settings.tooltip_width-6)
arrow_left=tooltip_settings.tooltip_width-6-tooltip_settings.arrow_width;if(tooltip_left+arrow_left+(tooltip_settings.arrow_width/2)<tooltip_settings.element_left)arrow_left=-10000;}
if(tooltip_left<horizontal_scroll){arrow_left-=horizontal_scroll-tooltip_left;tooltip_left=horizontal_scroll+2;if(arrow_left<0)
arrow_left=(tooltip_settings.arrow_width/2);if(tooltip_left+arrow_left+(tooltip_settings.arrow_width/2)>tooltip_settings.element_left+tooltip_settings.element_width)arrow_left=-10000;}
tooltip_settings.message.css('margin-top','');tooltip_settings.arrow_container.removeClass('Zebra_Tooltip_Arrow_Top').addClass('Zebra_Tooltip_Arrow_Bottom');if(tooltip_top<vertical_scroll||(tooltip_settings.vertical_alignment==='below'&&tooltip_settings.element_top+tooltip_settings.element_height+tooltip_settings.vertical_offset+tooltip_settings.tooltip_height+tooltip_settings.animation_offset<window_height+vertical_scroll)){tooltip_top=tooltip_settings.element_top+tooltip_settings.element_height-tooltip_settings.vertical_offset;tooltip_settings.animation_offset=Math.abs(tooltip_settings.animation_offset);tooltip_settings.message.css('margin-top',(tooltip_settings.arrow_height/2));tooltip_settings.arrow_container.removeClass('Zebra_Tooltip_Arrow_Bottom').addClass('Zebra_Tooltip_Arrow_Top');}else{tooltip_settings.animation_offset=-Math.abs(tooltip_settings.animation_offset);tooltip_top+=tooltip_settings.vertical_offset;}
tooltip_settings.arrow_container.css('left',arrow_left);tooltip_settings.tooltip.css({left:tooltip_left,top:tooltip_top});$.extend(tooltip_settings,{tooltip_left:tooltip_left,tooltip_top:tooltip_top,arrow_left:arrow_left});tooltip_settings=$.extend($element.data('Zebra_Tooltip'),tooltip_settings);$element.data('Zebra_Tooltip',tooltip_settings);return tooltip_settings;},_show=function($element){var tooltip_settings=$element.data('Zebra_Tooltip');clearTimeout(tooltip_settings.show_timeout);if(!tooltip_settings.muted){clearTimeout(tooltip_settings.hide_timeout);tooltip_settings.show_timeout=setTimeout(function(){tooltip_settings=_create_tooltip($element);if(tooltip_settings.onBeforeShow&&typeof tooltip_settings.onBeforeShow==='function')
if(tooltip_settings.onBeforeShow($element,tooltip_settings.tooltip)===false)return;if(tooltip_settings.tooltip.css('display')!=='block')
tooltip_settings.tooltip.css({top:tooltip_settings.tooltip_top+tooltip_settings.animation_offset});tooltip_settings.tooltip.css('display','block');tooltip_settings.tooltip.stop();tooltip_settings.tooltip.animate({top:tooltip_settings.tooltip_top,opacity:tooltip_settings.opacity},tooltip_settings.animation_speed,function(){if(tooltip_settings.onShow&&typeof tooltip_settings.onShow==='function')
tooltip_settings.onShow($element,tooltip_settings.tooltip);});},tooltip_settings.show_delay);}},_hide=function($element){var tooltip_settings=$element.data('Zebra_Tooltip');clearTimeout(tooltip_settings.hide_timeout);if(!tooltip_settings.sticky){clearTimeout(tooltip_settings.show_timeout);tooltip_settings.hide_timeout=setTimeout(function(){if(tooltip_settings.tooltip){if(tooltip_settings.onBeforeHide&&typeof tooltip_settings.onBeforeHide==='function')
if(tooltip_settings.onBeforeHide($element,tooltip_settings.tooltip)===false)return;tooltip_settings.close=false;if(tooltip_settings.destroy)
tooltip_settings.muted=true;$element.data('Zebra_Tooltip',tooltip_settings);$('a.Zebra_Tooltip_Close',tooltip_settings.tooltip).remove();tooltip_settings.tooltip.stop();tooltip_settings.tooltip.animate({opacity:0,top:tooltip_settings.tooltip_top+tooltip_settings.animation_offset},tooltip_settings.animation_speed,function(){$(this).css('display','none');if(tooltip_settings.onHide&&typeof tooltip_settings.onHide==='function')
tooltip_settings.onHide($element,tooltip_settings.tooltip);});}},tooltip_settings.hide_delay);}};plugin.hide=function(elements,destroy){elements.each(function(){var
$element=$(this),tooltip_settings=$element.data('Zebra_Tooltip');if(tooltip_settings){tooltip_settings.sticky=false;if(destroy)tooltip_settings.destroy=true;$element.data('Zebra_Tooltip',tooltip_settings);_hide($element);}});};plugin.show=function(elements,destroy){elements.each(function(){var
$element=$(this),tooltip_settings=$element.data('Zebra_Tooltip');if(tooltip_settings){tooltip_settings.sticky=true;tooltip_settings.muted=false;if(destroy)tooltip_settings.destroy=true;$element.data('Zebra_Tooltip',tooltip_settings);_show($element);}});};_init();};})($);});