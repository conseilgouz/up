; ----- DOCUMENTATION
shortdesc="Returns the weather forecast for a given date for a FRENCH given city"
longdesc="syntax 1 
{up meteo=Forecast date or datetime |insee=code |token=Token provided by Meteo Concept } 
syntax 2 
{up meteo=Forecast date or datetime |insee=code |token=Token provided by Meteo Concept } 
   text template with keywords
{/up meteo}
Find an insee code : https://www.insee.fr/fr/recherche/recherche-geographique

 ---- KEYWORDS
 ##insee##            Insee code of the town
 ##cp##               zipcode of the town
 ##name##             Name of the town
 ##latitude##         Decimal latitude
 ##longitude##        Decimal longitude
 ##altitude##         Altitude in meters
 ##dirwind10m## ou ##winddirs##   Wind direction 
 ##gust10m##          Wind gusts at 10 meters in km/h
 ##gustx##            Potential wind gust under storm or squall in km/h
 ##probafog##         Probability of fog between 0 and 100%.
 ##probafrost##       Probability of freezing between 0 and 100%.
 ##rainprob## ou ##probarain##    Probability of rain between 0 and 100%.
 ##probawind100##     Probability of wind >70 km/h between 0 and 100%.
 ##probawind70##      Probability of wind >100 km/h between 0 and 100%.
 ##rainmax## ou ##rr1##   Maximum daily rainfall in mm
 ##rain## ou ##rr10## Total rainfall for the day in mm
 ##weather-text##     Weather report in text form
 ##weather##          weather report index (number from 0 to 235)
 ##windspeed## ou ##wind10m##   Average wind at 10 meters in km/h
 ---- DAY PART ONLY
 ##temp## ou ##temp2m##      Temperature at 2 meters in °C
 ---- FULL DAY ONLY
 ##temp-max## ou ##tmax##    Maximum temperature at 2 meters in °C
 ##temp-min## ou ##tmin##    Minimum temperature at 2 meters in °C
 ##sun_hours##   	  Sunshine in hours
 ##etp##              Total evaporation in mm"

;-- messages
error_insee="<a href='https://www.insee.fr/fr/recherche/recherche-geographique' target='_blank'>The INSEE code is mandatory</a>"
error_empty_date="The date is not indicated"

;-- variables
MSG-ALL="The current forecast for ##DAY-PART## ##DATE## at ##NAME## (##CP##) is as follows:[br]
##WEATHER-TEXT## with a wind ##WINDDIRS## of ##WINDSPEED## km/h,
a minimum temperature of ##TEMP-MIN##° and a maximum temperature of ##TEMP-MAX##°.[br]
##RAIN##mm (no more than ##RAINMAX##mm anyway) of precipitation is forecast, with a probability of ##RAINPROB##%."

MSG-PART="The current forecast for ##DAY-PART## ##DATE## at ##NAME## (##CP##) is as follows:[br]
##WEATHER-TEXT## with a wind ##WINDDIRS## of ##WINDSPEED## km/h,
an average temperature of ##TEMP##°.[br]
##RAIN##mm (no more than ##RAINMAX##mm in any case) of precipitation is forecast, with a probability of ##RAINPROB##%"

; --- the words that can be used in the template with the term for the meteo-consult API
; --- lowercase search
SYNONYM = "
winddirs:dirwind10m,
windspeed:wind10m,
temp:temp2m,
temp-min:tmin,
temp-max:tmax,
rain:rr10,
rainmax:rr1,
rainprob:probarain
"

; --- texte pour arguments DAY-PART
DAY-PART="all:the day of, 0:the end of the night, 1:the morning of, 2:the afternoon of, 3:the evening of"

; --- valeurs retournées par l'API meteo-consult
WEATHER="
0:Sun,
1:Partly Cloudy,
2:Cloudy,
3:Cloudy,
4:Very cloudy,
5:Cloudy weather,
6:Fog,
7:Freezing fog,
10:Light rain,
11:Moderate rain,
12:Heavy rain,
13:Light freezing rain,
14:Moderate freezing rain,
15:Heavy freezing rain,
16:Bruine,
20:Light snow,
21:Moderate snow,
22:Strong snow,
30:Light rain and snow mixed,
31:Moderate mixed rain and snow,
32:Heavy rain and snow mixed together,
40:Local and light rain showers,
41:Local rain showers,
42:Local and heavy showers,
43:Light rain showers,
44:Rain showers,
45:Heavy rain showers,
46:Light and frequent rain showers,
47:Frequent rain showers,
48:Heavy and frequent rain showers,
60:Localized and light snow showers,
61:Localized snow showers,
62:Localized and heavy snow showers,
63:Light snow showers,
64:Snow flurries,
65:Heavy snow showers,
66:Frequent light snow showers,
67:Frequent snow showers,
68:Heavy and frequent snow showers,
70:Localized light rain and snow showers,
71:Localized mixed rain and snow showers,
72:Localized heavy rain and snow showers,
73:Light mixed rain and snow showers,
74:Mixed rain and snow showers,
75:Heavy mixed rain and snow showers,
76:Light and numerous mixed rain and snow showers,
77:Frequent mixed rain and snow showers,
78:Frequent heavy mixed rain and snow showers,
100:Light and local thunderstorms,
101:Local storms,
102:Strong and local thunderstorms,
103:Light thunderstorms,
104:Thunderstorms,
105:Strong thunderstorms,
106:Weak and frequent thunderstorms,
107:Frequent thunderstorms,
108:Strong and frequent thunderstorms,
120:Weak and local thunderstorms of snow or sleet,
121:Local snow or sleet thunderstorms,
122:Local snow or sleet thunderstorms,
123:Light snow or sleet thunderstorms,
124:Snowstorms or sleet,
125:Snowstorms or sleet,
126:Weak and frequent thunderstorms of snow or sleet,
127:Frequent snow or sleet storms,
128:Frequent snow or sleet storms,
130:Weak and local thunderstorms of mixed rain and snow or sleet,
131:Local thunderstorms of mixed rain and snow or sleet,
132:Strong and local thunderstorms of mixed rain and snow or sleet,
133:Light thunderstorms of rain and snow mixed or sleet,
134:Mixed rain and snow storms or sleet,
135:Strong thunderstorms of rain and snow mixed or sleet,
136:Weak and frequent thunderstorms of mixed rain and snow or sleet,
137:Frequent thunderstorms of rain and snow mixed or sleet,
138:Strong and frequent thunderstorms of rain and snow mixed or sleet,
140:Stormy rains,
141:Rain and snow mixed with a stormy character,
142:Stormy snow,
210:Intermittent light rain,
211:Intermittent moderate rain,
212:Intermittent heavy rain,
220:Intermittent light snow,
221:Intermittent moderate snow,
222:Intermittent heavy snow,
230:Rain and snow mixed,
231:Rain and snow mixed,
232:Rain and snow mixed,
235:Hailstorms"

WINDDIRS="
0:northern,
1:northeast,
2:northeastern,
3:east-North-East,
4:east,
5:east-Southeast,
6:southeastern,
7:south-Southeast,
8:southern,
9:south-Southwest,
10:southwestern,
11:west-Southwest,
12:western,
13:west-Northwest,
14:northwestern,
15:north-Northwest,
16:northern"